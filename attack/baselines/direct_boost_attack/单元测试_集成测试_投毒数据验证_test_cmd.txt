下面是一套完整的测试指令，涵盖单元测试、集成测试和投毒数据验证三个部分。

1. 运行所有单元测试（test/ 目录下所有以 test_*.py 开头的文件）

  # 进入项目根目录
cd ~/Code/MyWork/VIP5_Shadowcast_DPA

# 1.1 验证配置文件加载（param.py）
python src/param.py --config config.yaml

# 1.2 批量生成投毒数据（batch_poison.py）
python attack/baselines/direct_boost_attack/batch_poison.py

# 1.3 运行所有 unittest（test/ 目录下所有 test_*.py）
python -m unittest discover -s test


2. 验证投毒数据文件

    注意：verify_poisoned_data.py 默认使用 10% 的投毒比例（--ratio 0.1），不再需要手动传 --fake_count。

# 验证单个数据集（默认 10%）
python test/verify_poisoned_data.py \
  --datasets beauty \
  --data_root data

# 同时验证多个数据集（默认 10%）
python test/verify_poisoned_data.py \
  --datasets beauty clothing sports toys \
  --data_root data

# 如果想用其他比例（例如 5%），加上 --ratio
python test/verify_poisoned_data.py \
  --datasets beauty clothing \
  --data_root data \
  --ratio 0.05




3. （可选）重新生成并立即验证

# 3.1 重新批量生成投毒数据
python attack/baselines/direct_boost_attack/batch_poison.py

# 3.2 紧接着验证所有数据集
python test/verify_poisoned_data.py \
  --datasets beauty clothing sports toys \
  --data_root data
